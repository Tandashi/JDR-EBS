version: '3'
services:
  backend:
    container_name: 'JDR-EBS'
    image: 'twitch-jd-ebs:latest'
    build: .
    ports:
      - '9970:3000'
    environment:
      - APP_PROTOCOL=http
      - APP_HOSTNAME=0.0.0.0
      - APP_PORT=3000
      - STATIC_ROOT_DIR=/data/static
      # - STATIC_IMAGE_DIR=images    # Relative to the Root dir
      # - STATIC_VIDEO_DIR=videos    # Relative to the Root dir
      # - API_CLIENT_ID=
      # - API_CLIENT_SECRET=
      # - BOT_USERNAME=
      # - BOT_OAUTH_TOKEN=
      # - JWT_SECRET=
      - MONGODB_URI=mongodb://mongodb/jd
    depends_on:
      - mongodb
    volumes:
      - ~/JDR-EBS/static-data:/data/static
      - ~/JDR-EBS/song-data:/data/songs

  mongodb:
    container_name: 'JDR-MongoDB'
    image: 'mongo:latest'
    volumes:
      - ~/JDR-EBS/db-data:/data/db
